<!doctype html>
<html lang="pl">
<head>
    <title>jquery.autocompleter demo</title>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <link href="../src/jquery.autocompleter.less" rel="stylesheet/less" type="text/css" />
</head>
<body>
    <form method="post" action="">
        <input type="text" name="data_array[]" id="company-autocompleter" style="font-size: 13px; padding: 6px; width: 200px;" placeholder="Company name..." data-autocompleter="true" data-custom-items="true" data-unique-items="true" />
    </form>

    <script src="../dist/jquery.min.js"></script>
    <script src="../dist/less.min.js"></script>
    <script src="../src/jquery.autocompleter.js"></script>

    <script>
        (function() {
            function jsonUpdateHandler(event, json) {
                var $autocompleter = $(event.target).next(),
                    suggestions = [];

                for (var i = 0; i < json.length; i++) {
                    suggestions.push({
                        label: json[i].name,
                        value: json[i].id
                    });
                }

                $autocompleter.data('suggestions', suggestions);

                console.log('json updated', suggestions);
            }

            function itemAddHandler(event, item) {
                console.log('item added', item)
            }

            function itemRemoveHandler(event, item) {
                console.log('item removed', item)
            }

            function inputBlurHandler(event) {
                console.log('input blurred');
            }

            function inputClearHandler(event) {
                console.log('input cleared');
            }

            function itemFocusHandler(event, item) {
                console.log('item focused', item);
            }

            $(function() {
                $('input[data-autocompleter="true"]').autocompleter()
                                                     .on('json-update.autocompleter', jsonUpdateHandler)
                                                     .on('item-add.autocompleter', itemAddHandler)
                                                     .on('item-remove.autocompleter', itemRemoveHandler)
                                                     .on('item-focus.autocompleter', itemFocusHandler)
                                                     .on('input-blur.autocompleter', inputBlurHandler)
                                                     .on('input-clear.autocompleter', inputClearHandler);
            });
        }());
    </script>
</body>
</html>